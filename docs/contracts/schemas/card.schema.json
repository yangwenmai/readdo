{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://readdo.dev/schemas/card.schema.json",
    "title": "ReadDo Card Artifact (v1)",
    "type": "object",
    "additionalProperties": false,
    "required": ["headline", "points", "insight", "action", "render_spec"],
    "properties": {
      "headline": {
        "type": "string",
        "description": "Card headline. Clear, specific, and shareable.",
        "minLength": 10,
        "maxLength": 90
      },
      "points": {
        "type": "array",
        "description": "Three concise points for the card body.",
        "minItems": 3,
        "maxItems": 3,
        "items": {
          "type": "string",
          "minLength": 8,
          "maxLength": 160
        }
      },
      "insight": {
        "type": "string",
        "description": "One-sentence insight that elevates the points into a takeaway.",
        "minLength": 12,
        "maxLength": 220
      },
      "action": {
        "type": "string",
        "description": "One-sentence action suggestion (what to do next).",
        "minLength": 10,
        "maxLength": 200
      },
      "hashtags": {
        "type": "array",
        "description": "Optional hashtags for caption generation.",
        "minItems": 0,
        "maxItems": 6,
        "items": {
          "type": "string",
          "minLength": 2,
          "maxLength": 24,
          "pattern": "^#?[A-Za-z0-9_\\-]+$"
        }
      },
      "caption": {
        "type": "string",
        "description": "Optional suggested caption text for sharing (separate from the card image).",
        "minLength": 0,
        "maxLength": 600
      },
      "render_spec": {
        "type": "object",
        "description": "Rendering specification for generating PNG/HTML. MVP uses HTML spec.",
        "additionalProperties": false,
        "required": ["format", "width", "height", "theme", "payload"],
        "properties": {
          "format": {
            "type": "string",
            "enum": ["HTML_V1"]
          },
          "width": {
            "type": "integer",
            "minimum": 600,
            "maximum": 1600,
            "description": "Canvas width in pixels."
          },
          "height": {
            "type": "integer",
            "minimum": 600,
            "maximum": 2000,
            "description": "Canvas height in pixels."
          },
          "theme": {
            "type": "string",
            "description": "Theme identifier. MVP keeps it simple.",
            "enum": ["LIGHT", "DARK"]
          },
          "payload": {
            "type": "object",
            "description": "HTML renderer payload; content is duplicated here for deterministic rendering.",
            "additionalProperties": false,
            "required": ["brand", "layout", "content"],
            "properties": {
              "brand": {
                "type": "object",
                "additionalProperties": false,
                "required": ["watermark"],
                "properties": {
                  "watermark": {
                    "type": "string",
                    "description": "Brand watermark text shown on card.",
                    "minLength": 1,
                    "maxLength": 40
                  }
                }
              },
              "layout": {
                "type": "object",
                "additionalProperties": false,
                "required": ["variant"],
                "properties": {
                  "variant": {
                    "type": "string",
                    "description": "Card layout variant.",
                    "enum": ["CARD_4x5_V1", "CARD_1x1_V1"]
                  },
                  "padding": {
                    "type": "integer",
                    "minimum": 16,
                    "maximum": 80
                  }
                }
              },
              "content": {
                "type": "object",
                "additionalProperties": false,
                "required": ["headline", "points", "insight", "action"],
                "properties": {
                  "headline": { "type": "string", "minLength": 10, "maxLength": 90 },
                  "points": {
                    "type": "array",
                    "minItems": 3,
                    "maxItems": 3,
                    "items": { "type": "string", "minLength": 8, "maxLength": 160 }
                  },
                  "insight": { "type": "string", "minLength": 12, "maxLength": 220 },
                  "action": { "type": "string", "minLength": 10, "maxLength": 200 }
                }
              }
            }
          }
        }
      },
      "evidence": {
        "type": "array",
        "description": "Optional minimal evidence snippets supporting the card (privacy-friendly).",
        "minItems": 0,
        "maxItems": 4,
        "items": {
          "type": "object",
          "additionalProperties": false,
          "required": ["quote"],
          "properties": {
            "quote": { "type": "string", "minLength": 10, "maxLength": 220 },
            "source_hint": { "type": "string", "minLength": 0, "maxLength": 80 }
          }
        }
      }
    }
  }
  